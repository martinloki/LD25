<!doctype html>
<html>
	<head>
		<title>Granny's Gummies - LD25</title>
		<link href="/stylesheets/LD25.css" media="all" rel="stylesheet" type="text/css"/>
		<script language="javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js" type="text/javascript"></script>
	</head>
	<body>
		<h1>Granny's Gummies</h1>
		<!--<img id="background" src="images/background.png" alt="floorplan" width="800" height="600">-->
		<script type='text/javascript'>
			var CANVAS_WIDTH=800;
			var CANVAS_HEIGHT=600;
			var FPS=30;
			var textX=50;
			var textY=50;
			
			var canvasElement=$("<canvas width='"+CANVAS_WIDTH+"' height='"+CANVAS_HEIGHT+"' style='border:1px solid #000000;'></canvas>");
			var canvas=canvasElement.get(0).getContext("2d");
			
			var bg_image = new Image();
			var kid_image = new Image();
			var KID_RADIUS=30;
			
			var kids=[];
						
			function Kid(Index){
				Index = Index || {};
				Index.color="#00A";
				Index.x=Math.random()*CANVAS_WIDTH/2;;
				Index.y=50;
				Index.width=KID_RADIUS;
				Index.height=KID_RADIUS;
				Index.draw=function(){
					canvas.drawImage(kid_image, Index.x,Index.y);
				};
				
				Index.update = function() {
					Index.x+=2;
					Index.y+=1;
				};
				
				return Index;				
				
			};
			
			//
			
			function load_images(){
				bg_image.src = 'images/background.png';
				kid_image.src = 'images/kid.png';	
				kids.push(Kid());
				kids.push(Kid());
			}
			
			setInterval(function(){
					update();
					draw();
				},1000/FPS
			);

			function update(){
				textX+=1;
				textY+=1;
				kids.forEach(function(kid) {
					kid.update();
				});
			}
			
			function draw(){
				canvas.clearRect(0,0,CANVAS_WIDTH,CANVAS_HEIGHT);
				canvas.drawImage(bg_image, 0, 0);
				canvas.fillStyle="#000";
				canvas.fillText("Test",textX,textY);				
				kids.forEach(function(kid) {		
						kid.draw();
				});        
			}

			load_images()
			canvasElement.appendTo('body');
			
		</script>
	</body>
</html>